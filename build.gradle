apply plugin: 'java'
apply plugin :'idea'
apply plugin: 'sonar-runner'
apply plugin: 'jacoco'

subprojects {
  apply plugin: 'java'
  apply plugin: 'jacoco'
}

tasks.withType(Test) {
    afterTest { descriptor, result ->
        logger.info("Executed test ${descriptor.getClassName().substring(descriptor.getClassName().lastIndexOf('.') + 1 )}.${descriptor.name} (${result.getEndTime() - result.getStartTime()}ms): ${result.getResultType()}")
    }

    testLogging {
        exceptionFormat "full"
    }
}

sonarRunner {
    sonarProperties {
        property "sonar.projectName", "test-samples"
        property "sonar.projectKey", "jsebfranck.samples"
        property "sonar.jacoco.reportPath", "${project.buildDir}/jacoco/test.exec"
    }
}

